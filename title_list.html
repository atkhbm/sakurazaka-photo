<ul id="title-list"></ul>

<script>
  const csvUrl = "https://raw.githubusercontent.com/atkhbm/sakurazaka-photo/refs/heads/main/sakurazaka_master_full.csv";

  fetch(csvUrl)
    .then(response => response.text())
    .then(text => {
      const rows = text.trim().split("\n").map(line =>
        line.match(/(".*?"|[^",]+)(?=\s*,|\s*$)/g).map(cell => cell.replace(/^"|"$/g, ""))
      );

      const data = rows.slice(1); // ヘッダー除去
      const titleSet = new Set();

      data.forEach(row => {
        const title = row[1]; // 品名は2列目
        if (title) titleSet.add(title.trim());
      });

      const titleList = document.getElementById("title-list");
      if (titleSet.size === 0) {
        titleList.innerHTML = "<li>品名が見つかりませんでした。</li>";
        return;
      }

      [...titleSet].sort().forEach(title => {
        const li = document.createElement("li");
        const a = document.createElement("a");
        a.href = `item_detail.html?item=${encodeURIComponent(title)}`;
        a.textContent = title;
        li.appendChild(a);
        titleList.appendChild(li);
      });
    })
    .catch(err => {
      console.error("CSV読み込みエラー:", err);
      document.getElementById("title-list").innerHTML = "<li>データの読み込みに失敗しました。</li>";
    });
</script>
